<script lang="ts">
  import { type Theme, themeService } from "../services/theme.svelte";

  // Estado del tema
  let darkMode : Theme = $state<Theme>("dark");

  $effect(() => {
    darkMode = themeService.theme
  });
</script>

<header>
  <nav>
    {#if darkMode === "light"}
      <svg
        height="30px"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 681.37 56.5"
      >
        <path
          d="M223.74 1l-9.55 23.64c-1.54 3.75-3.08 8.19-4.27 11.95h-.17c-1.11-3.76-2.82-8.2-4.36-11.95L195.83 1h-9.47l-3.93 54.45h11.1L195 36.28c.26-3.08.34-6.06.34-9.65h.17a103.8 103.8 0 003.5 9.82l8 19.12h5.63l7.85-19.12c1.2-2.9 2.56-6.49 3.59-9.82h.17c-.09 3.41.17 6.83.34 9.65l1.41 19.2h11.27L233.22 1zm37.49 32.12h12.12v-9.9h-12.12V10.84h14.94V1.02h-26.63v54.46h28.42v-9.82h-16.73V33.12zm24.25-22.54h12.89v44.9h11.78V10.67h12.8V1.02h-37.47v9.56zm59.33 22.54h12.13v-9.9h-12.13V10.84h14.94V1.02h-26.63v54.46h28.43v-9.82h-16.74V33.12zM394.59 0c-13 0-23.65 11.1-23.65 28.17 0 17.24 10.68 28.33 23.65 28.33s23.64-11.09 23.64-28.33C418.23 11.1 407.48 0 394.59 0zm0 45.84c-6.15 0-11.61-7.09-11.61-17.67 0-10.42 5.46-17.59 11.61-17.59s11.61 7.17 11.61 17.59c0 10.58-5.55 17.67-11.61 17.67zm43.89-44.82h-7.6v54.46h26.54v-6.57h-18.94V1.02zm48.58-.93c-12.29 0-22.88 11-22.88 28.08 0 17.24 10.59 28.16 22.88 28.16s22.79-10.92 22.79-28.16c0-17.07-10.59-28.08-22.79-28.08zm0 49.42c-7.68 0-15.11-8.2-15.11-21.34s7.43-21.26 15.11-21.26c7.51 0 15 8.2 15 21.26s-7.49 21.34-15 21.34zm57.03-15.03h9.39V47.2c-1.8 1.54-4.7 2.39-8.37 2.39-8.36 0-16.21-7.77-16.21-21.25 0-13.66 8-21.43 16.55-21.43a18.84 18.84 0 0111.44 4l1.2-6.91c-3-2.22-7.68-3.92-13.66-3.92-11.61 0-23.21 10.07-23.21 28.16 0 17.84 11.26 28.08 23.47 28.08 6.74 0 11.95-1.79 15.87-5.54V28.25h-16.47zm31.34-33.45h7.68v54.46h-7.68zm45.84 5.88a17.8 17.8 0 0110.24 3.16l1.11-6.83A23.36 23.36 0 00620.25.09C608.64.09 597 10.16 597 28.25s11.44 28.08 23.22 28.08c5.37 0 8.44-.85 11-2.39l1.28-7.51c-2.48 1.8-6.32 3.08-11.27 3.08-8.71 0-16.47-7.77-16.47-21.26s7.98-21.34 16.51-21.34zm42.09-6.4h-3.93l-18 55h7.35l4.52-14.25h16l4.44 14.25h7.68zm-8 34.66l4.09-13.23a52.26 52.26 0 001.71-6.66h.17a53.32 53.32 0 001.8 6.66l4 13.23zM9.73 27C-7.3 39.26 2 55.17 7.9 55.29c0 0 1-.12 138.47 0C149.28 55.29 41.69 3.92 9.73 27zm99.76 1.84c9.32 3.45 16.75 6.34 22.7 8.82a19.19 19.19 0 10-23.11-9z"
          fill="#000"
        />
      </svg>
      <button
        aria-label="Dark mode"
        class="circle-btn"
        onclick={() => ((darkMode = "dark"), themeService.toggleTheme())}
        ><i class="fa-solid fa-moon"></i></button
      >
    {/if}
    {#if darkMode === "dark"}
      <svg
        height="30px"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 681.37 56.5"
      >
        <path
          d="M223.74 1l-9.55 23.64c-1.54 3.75-3.08 8.19-4.27 11.95h-.17c-1.11-3.76-2.82-8.2-4.36-11.95L195.83 1h-9.47l-3.93 54.45h11.1L195 36.28c.26-3.08.34-6.06.34-9.65h.17a103.8 103.8 0 003.5 9.82l8 19.12h5.63l7.85-19.12c1.2-2.9 2.56-6.49 3.59-9.82h.17c-.09 3.41.17 6.83.34 9.65l1.41 19.2h11.27L233.22 1zm37.49 32.12h12.12v-9.9h-12.12V10.84h14.94V1.02h-26.63v54.46h28.42v-9.82h-16.73V33.12zm24.25-22.54h12.89v44.9h11.78V10.67h12.8V1.02h-37.47v9.56zm59.33 22.54h12.13v-9.9h-12.13V10.84h14.94V1.02h-26.63v54.46h28.43v-9.82h-16.74V33.12zM394.59 0c-13 0-23.65 11.1-23.65 28.17 0 17.24 10.68 28.33 23.65 28.33s23.64-11.09 23.64-28.33C418.23 11.1 407.48 0 394.59 0zm0 45.84c-6.15 0-11.61-7.09-11.61-17.67 0-10.42 5.46-17.59 11.61-17.59s11.61 7.17 11.61 17.59c0 10.58-5.55 17.67-11.61 17.67zm43.89-44.82h-7.6v54.46h26.54v-6.57h-18.94V1.02zm48.58-.93c-12.29 0-22.88 11-22.88 28.08 0 17.24 10.59 28.16 22.88 28.16s22.79-10.92 22.79-28.16c0-17.07-10.59-28.08-22.79-28.08zm0 49.42c-7.68 0-15.11-8.2-15.11-21.34s7.43-21.26 15.11-21.26c7.51 0 15 8.2 15 21.26s-7.49 21.34-15 21.34zm57.03-15.03h9.39V47.2c-1.8 1.54-4.7 2.39-8.37 2.39-8.36 0-16.21-7.77-16.21-21.25 0-13.66 8-21.43 16.55-21.43a18.84 18.84 0 0111.44 4l1.2-6.91c-3-2.22-7.68-3.92-13.66-3.92-11.61 0-23.21 10.07-23.21 28.16 0 17.84 11.26 28.08 23.47 28.08 6.74 0 11.95-1.79 15.87-5.54V28.25h-16.47zm31.34-33.45h7.68v54.46h-7.68zm45.84 5.88a17.8 17.8 0 0110.24 3.16l1.11-6.83A23.36 23.36 0 00620.25.09C608.64.09 597 10.16 597 28.25s11.44 28.08 23.22 28.08c5.37 0 8.44-.85 11-2.39l1.28-7.51c-2.48 1.8-6.32 3.08-11.27 3.08-8.71 0-16.47-7.77-16.47-21.26s7.98-21.34 16.51-21.34zm42.09-6.4h-3.93l-18 55h7.35l4.52-14.25h16l4.44 14.25h7.68zm-8 34.66l4.09-13.23a52.26 52.26 0 001.71-6.66h.17a53.32 53.32 0 001.8 6.66l4 13.23zM9.73 27C-7.3 39.26 2 55.17 7.9 55.29c0 0 1-.12 138.47 0C149.28 55.29 41.69 3.92 9.73 27zm99.76 1.84c9.32 3.45 16.75 6.34 22.7 8.82a19.19 19.19 0 10-23.11-9z"
          fill="#fff"
        />
      </svg>
      <button
        aria-label="Light mode"
        class="circle-btn"
        onclick={() => ((darkMode = "light"), themeService.toggleTheme())}
        ><i class="fa-solid fa-sun"></i></button
      >
    {/if}
  </nav>
</header>

<style>
  header {
    background: linear-gradient(
      180deg,
      var(--bg-elevated) 0%,
      transparent 100%
    );
    border-bottom: 1px solid var(--color-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: var(--z-sticky);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    animation: fadeInFromTop 0.6s;
  }

  nav {
    padding: var(--spacing-sm) var(--spacing-md);
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1400px;
    width: 100%;
    gap: var(--spacing-md);
  }

  svg {
    height: 18px !important;
    width: auto;
    filter: drop-shadow(var(--shadow-md));
    flex-shrink: 0;
  }

  .circle-btn {
    width: 40px;
    height: 40px;
    display: flex;
    justify-content: center;
    outline: none;
    border: none;
    align-items: center;
    background-color: var(--bg-main);
    border: 1px solid var(--color-primary);
    border-radius: 9999px;
    cursor: pointer;
    flex-shrink: 0;
    transition:
      transform var(--transition),
      background-color var(--transition);
  }

  .circle-btn:hover {
    background-color: var(--bg-hover);
  }

  .circle-btn:active {
    transform: scale(0.95);
  }

  @media (max-width: 768px) {
    nav {
      padding: var(--spacing-md) var(--spacing-md);
    }

    svg {
      height: 18px;
    }

    .circle-btn {
      width: 36px;
      height: 36px;
    }
  }

  @media (max-width: 480px) {
    nav {
      padding: var(--spacing-md) var(--spacing-sm);
    }

    svg {
      height: 16px !important;
    }

    .circle-btn {
      width: 32px;
      height: 32px;
    }

    .circle-btn i {
      font-size: var(--text-sm);
    }
  }

  @media (min-width: 1024px) {
    svg {
      height: 28px;
    }

    .circle-btn {
      width: 44px;
      height: 44px;
    }
  }
</style>
